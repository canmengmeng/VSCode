# 1.1 计算机网络在信息时代中的作用

Internet : 互联网
- 连通性、虚拟
- 共享：资源共享

互联网+ ：互联网+各个传统行业

互联网已经成为世界上最大的计算机网络

# 1.2 互联网概述
## 1.2.1 网络的网络

计算机网络（Internet）由若干结点（node）和连接这些结点的链路（link）组成

结点（node）可以是计算机、集线器、交换机或路由器等

互连网（internet）：网络之间通过路由器互连起来

与网络相连的计算机常称为主机（host）

网络把许多计算机连接在一起， 而互连网则把许多网络通过路由器连接在一起

## 1.2.2 互联网基础结构发展的三个阶段

第一阶段是从单个网络ARPANET向互连网发展的过程

第二阶段的特点是建成了三级结构的互联网，三级计算机网络，分为主干网、地区网和校园网（或企业网）

第三阶段的特点是逐渐形成了多层次ISP（Internet Service Provider）结构的互联网

同时拥有 IP 通信线路 路由器等联网设备 才能上网

ISP：主干ISP、地区ISP和本地ISP

主干ISP可互相连接  
地区ISP通过一个或多个主干ISP相连  
本地ISP可以连接到地区ISP，也可直接连接到主干ISP

本地ISP给用户提供直接的服务

互联网交换点IXP（Internet eXchange Point）：允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组

典型的IXP由一个或多个网络交换机组成，许多ISP再连接到这些网络交换机的相关端口上

## 1.2.3 互联网的标准化工作

制定互联网的正式标准要经过以下三个阶段
1. 互联网草案（Internet Draft）——互联网草案的有效期只有六个月。在这个阶段还不能算是RFC文档
2. 建议标准（Proposed Standard）——从这个阶段开始就成为RFC文档
3. 互联网标准（Internet Standard）——达到正式标准后， 每个标准就分配到一个编号STD。一个标准可以和多个RFC文档关联

以前：建议标准→草案标准→互联网标准  
现在：建议标准→互联网标准

# 1.3 互联网的组成

边缘部分：由所有连接在互联网上的主机组成  
核心部分：由大量网络和连接这些网络的路由器组成，提供连通性和交换

## 1.3.1 互联网的边缘部分

主机（host）又称端系统（end system）

用来进行通信（传送数据、音频或视频）和资源共享

### 1. 客户-服务器模式（C/S模式）

客户（client）和服务器（server）都是指通信中所涉及的两个应用进程

描述的是进程之间服务和被服务的关系

客户是服务请求方，服务器是服务提供方

服务请求方和服务提供方都要使用网络核心部分所提供的服务

客户程序特点：
- 客户程序必须知道服务器程序的地址
- 不需要特殊的硬件和很复杂的操作系统

服务器程序特点：
- 是一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求
- 系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的通信请求。因此，服务器程序不需要知道客户程序的地址
- 一般需要有强大的硬件和高级的操作系统支持

### 2. 对等连接方式（P2P模式）

两台主机在通信时并不区分哪一个是服务请求方哪一个是服务提供方

对等连接中的每一台主机既是客户又同时是服务器

## 1.3.2 互联网的核心部分

网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一台主机都能够向其他主机通信

路由器（router）：实现分组交换（packet switching）的关键构件，转发收到的分组

### 1. 电路交换（circuit switching）的主要特点

交换（switching）就是按照某种方式动态地分配传输线路的资源

经过 “建立连接（占用通信资源）→通话（一直占用通信资源）→释放连接（归还通信资源）”三个步骤的交换方式称为电路交换

电路交换的一个重要特点就是在通话的全部时间内，通话的两个用户始终占用端到端的通信资源

电路交换线路的传输效率往往很低

### 2. 分组交换的主要特点

分组交换采用存储转发技术，把一个报文（message）划分为几个分组（packet）后再进行传送

互联网的核心部分是由许多网络和把它们互连起来的路由器组成的，而主机处在互联网的边缘部分

主机是为用户进行信息处理的，并且可以和其他主机通过网络交换信息  
路由器则是用来转发分组的，即进行分组交换的

路由器收到一个分组，先暂时存储一下，检查其首部，查找转发表，按照首部中的目的地址，找到合适的接口转发出去，把分组交给下一个路由器  

各路由器之间必须经常交换彼此掌握的路由信息，以便创建和动态维护路由器中的转发表，使得转发表能够在整个网络拓扑发生变化时及时更新

分组交换在传送数据之前不必先占用一条端到端的链路的通信资源，分组在哪段链路上传送才占用这段链路的通信资源

省去了建立连接和释放连接的开销，因而数据的传输效率更高

为了提高分组交换网的可靠性，互联网的核心部分常采用网状拓扑结构，使得当发生网络拥塞或少数结点、链路出现故障时，路由器可灵活地改变转发路由而不致引起通信的中断或全网的瘫痪

| 优点 | 所采用的手段 |
|:------:|:-------------:|
| 高效 | 在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用|
| 灵活 | 为每一个分组独立地选择最合适的转发路由|
| 迅速 | 以分组作为传送单位，可以不先建立连接就能向其他主机发送分组|
| 可靠 | 保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性|

分组交换的缺点：  
- 无法确保通信时端到端所需要的带宽
- 各分组必须携带的控制信息也造成一定的开销（overhead）

电路交换、报文交换和分组交换的主要区别：  
- 电路交换：整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。
- 报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点
- 分组交换：单个分组（这只是整个报文的一部分）传送到相邻结点，存储下来后查找转发表，转发到下一个结点。

由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性

# 1.5 计算机网络的类别

## 1.5.1 计算机网络的定义

计算机网络主要是由一些通用的、可编程的硬件（含有中央处理器CPU）互连而成的，这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用

- 计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机
- 计算机网络并非专门用来传送数据，而是能够支持很多种的应用

## 1.5.2 几种不同类别的计算机网络

### 1. 按照网络的作用范围进行分类

1. 广域网WAN（Wide Area Network）：作用范围通常是几十到几千公里

2. 城域网MAN（Metropolitan Area Network）：作用范围一般是一个城市

3. 局域网LAN（Local Area Network）：作用范围通常在一千米左右

4. 个人区域网PAN（Personal Area Network）：也常称为无线个人区域网WPAN（Wireless PAN），作用范围大约在十米左右

### 2. 按照网络的使用者进行分类

1. 公用网（public network）：所有愿意按电信公司的规定交纳费用的人都可以使用这种网络

2. 专用网（private network）：这种网络不向本单位以外的人提供服务

### 3. 用来把用户接入到互联网的网络

接入网AN（Access Network）：接入网是从某个用户端系统到互联网中的第一个路由器（也称为边缘路由器）之间的一种网络

# 1.6 计算机网络的性能

## 1.6.1 计算机网络的性能指标

### 1. 速率

比特（bit）：一个比特就是二进制数字中的0或1

速率指的是数据的传送速率，也称为数据率（data rate）或比特率（bit rate），单位是bit/s（或b/s，有时也写为bps）

速率的单位转化是以10的次方为单位的

### 2. 带宽

带宽表示在单位时间内网络中的某信道所能通过的最高数据率，单位是bit/s

### 3. 吞吐量

吞吐量（throughput）表示在单位时间内通过某个网络（或信道、接口）的实际的数据量

吞吐量受网络的带宽或网络的额定速率的限制

### 4. 时延

时延（delay或latency）是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间

1. 发送时延（transmission delay）：主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间，也叫做传输时延

2. 传播时延（propagation delay）：电磁波在信道中传播一定的距离需要花费的时间

3. 处理时延：主机或路由器在收到分组时要花费一定的时间进行处理的时间

4. 排队时延：分组在经过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。在路由器确定了转发接口后，还要在输出队列中排队等待转发。这就产生了排队时延

### 5. 时延带宽积

时延带宽积等于传播时延乘以带宽，表示这样的链路可容纳多少个比特，链路的时延带宽积又称为以比特为单位的链路长度

### 6. 往返时间RTT

双向交互一次所需的时间

### 7. 利用率

- 信道利用率：指出某信道有百分之几的时间是被利用的（有数据通过）

- 网络利用率：全网络的信道利用率的加权平均值

当网络的利用率接近最大值1时，网络的时延就趋于无穷大，需控制信道利用率不超过50%


## 1.6.2 计算机网络的非性能指标

1. 费用：网络的价格

2. 质量：网络中所有构件的质量，以及这些构件是怎样组成网络的

3. 标准化

4. 可靠性

5. 可扩展性和可升级性

6. 易于管理和维护

# 1.7 计算机网络体系结构

## 1.7.2 协议与划分层次

网络协议（network protocol）：为进行网络中的数据交换而建立的规则、标准或约定，简称为协议，包括：

1. 语法，即数据与控制信息的结构或格式

2. 语义，即需要发出何种控制信息，完成何种动作以及做出何种响应

3. 同步，即事件实现顺序的详细说明

分层的好处：

1. 各层之间是独立的

2. 灵活性好

3. 结构上可分隔开

4. 易于实现和维护

5. 能促进标准化工作

各层所要完成的功能：

1. 差错控制：使相应层次对等方的通信更加可靠

2. 流量控制：发送端的发送速率必须使接受端来得及接受，不要太快

3. 分段和重装：发送端将要发送的数据块划分为更小的单位，在接收端将其还原

4. 复用和分用：发送端几个高层会话复用一条低层的连接，在接收端再进行分用

5. 连接建立和释放：交换数据前先建立一条逻辑连接，数据传送结束后释放连接

## 1.7.3 具有五层协议的体系结构（自顶向下）

### 1. 应用层（application layer）

应用层的作用使通过应用进程间的交互来完成特定网络应用，协议是应用进程间通信和交互的规则

包含域名系统DNS，支持万维网应用的HTTP协议，支持电子邮件的SMTP协议等

应用层交互的数据单元称为报文（message）

### 2. 运输层（transport layer）

运输层的任务就是负责向两台主机中进程之间的通信提供通用的数据传输服务，应用进程利用该服务传送应用层报文

由于一台主机可同时运行多个进程，因此运输层有复用和分用的功能。复用就是多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程

主要使用TCP与UDP两种协议：

- TCP：提供面向连接的、可靠的数据传输服务，其数据传输的单位是报文段（segment）

- UDP：提供无连接的、尽最大努力（best-effort）的数据传输服务（不保证数据传输的可靠性），其数据传输的单位是用户数据报

### 3. 网络层（network layer）

网络层负责为分组交换网上的不同主机提供通信服务，网络层把运输层产生的报文段或用户数据报封装成分组或包进行传送，分组也称IP数据报，简称数据报

网络层负责选择合适的路由，使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机

网络层协议是无连接的网际协议IP（Internet Protocol）和许多种路由选择协议